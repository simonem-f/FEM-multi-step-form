<div class="multi-step-container">
  <aside class="side-steps">
    <div class="side-step" [ngClass]="{ active: carouselIndex === 0 }">
      <div class="step-number"></div>
      <div class="step-label">
        <div>step</div>
        <div>your info</div>
      </div>
    </div>
    <div class="side-step" [ngClass]="{ active: carouselIndex === 1 }">
      <div class="step-number"></div>
      <div class="step-label">
        <div>step</div>
        <div>select plan</div>
      </div>
    </div>
    <div class="side-step" [ngClass]="{ active: carouselIndex === 2 }">
      <div class="step-number"></div>
      <div class="step-label">
        <div>step</div>
        <div>add-ons</div>
      </div>
    </div>
    <div class="side-step" [ngClass]="{ active: carouselIndex >= 3 }">
      <div class="step-number"></div>
      <div class="step-label">
        <div>step</div>
        <div>summary</div>
      </div>
    </div>
  </aside>

  <section class="form-section">
    <ngb-carousel
      [keyboard]="false"
      [interval]="0"
      [showNavigationArrows]="false"
      [showNavigationIndicators]="false"
      (slid)="onSlideEnd()"
      (slide)="onSlideStart()"
    >
      <ng-template ngbSlide [id]="'info'">
        <div class="form-step">
          <h3>Personal info</h3>
          <p class="sub-headings">
            Please provide your name, email address, and phone number.
          </p>
          <form [formGroup]="infoForm" class="form-container">
            <div
              class="input-container"
              *ngIf="infoForm.get('name') as nameControl"
            >
              <label for="name">Name: </label>
              <span
                class="validation-error"
                *ngIf="nameControl.touched && nameControl.hasError('required')"
              >
                This field is required
              </span>
              <input
                id="name"
                type="text"
                formControlName="name"
                placeholder="e.g. Stephen King"
              />
            </div>

            <div
              class="input-container"
              *ngIf="infoForm.get('email') as emailControl"
            >
              <label for="email-address">Email Address: </label>
              <span
                class="validation-error"
                *ngIf="emailControl.touched && emailControl.errors"
              >
                {{
                  emailControl.hasError("required")
                    ? "This field is required"
                    : "Invalid email"
                }}
              </span>
              <input
                id="email-address"
                type="email"
                formControlName="email"
                placeholder="e.g. stephenking@lorem.com"
              />
            </div>

            <div
              class="input-container"
              *ngIf="infoForm.get('phone') as phoneControl"
            >
              <label for="phone-number">Phone Number: </label>
              <span
                class="validation-error"
                *ngIf="phoneControl.touched && phoneControl.errors"
              >
                {{
                  phoneControl.hasError("required")
                    ? "This field is required"
                    : "Invalid phone number"
                }}
              </span>
              <input
                id="phone-number"
                type="tel"
                formControlName="phone"
                placeholder="e.g. +1 234 567 890"
              />
            </div>
          </form>
        </div>
      </ng-template>

      <ng-template ngbSlide [id]="'plan'">
        <div class="form-step">
          <h3>Select your plan</h3>
          <p class="sub-headings">
            You have the option of monthly or yearly billing.
          </p>
          <!-- form -->
        </div>
      </ng-template>

      <ng-template ngbSlide [id]="'add-ons'">
        <div class="form-step">
          <h3>Pick add-ons</h3>
          <p class="sub-headings">
            Add-ons help enhance your gaming experience.
          </p>
          <!-- form -->
        </div>
      </ng-template>

      <ng-template ngbSlide [id]="'summary'">
        <div class="form-step">
          <h3>Finishing up</h3>
          <p class="sub-headings">
            Double-check everything looks OK before confirming.
          </p>
          <!-- form -->
        </div>
      </ng-template>

      <ng-template ngbSlide [id]="'completed'">
        <div class="form-step final">
          <!-- icon -->
          <h3>Thank you!</h3>
          <p class="sub-headings">
            Thanks for confirming your subscription! We hope you have fun using
            our platform. If you ever need support, please feel free email us at
            support@loremgaming.com.
          </p>
          <button
            pButton
            [disabled]="btnDisabled"
            type="button"
            label="Reset"
            icon="pi pi-undo"
            class="carousel-button reset-button p-button-text p-button-secondary"
            (click)="onReset()"
          ></button>
        </div>
      </ng-template>
    </ngb-carousel>
  </section>

  <section class="form-controls" *ngIf="carouselIndex < 4">
    <button
      pButton
      [disabled]="btnDisabled"
      type="button"
      label="Go Back"
      *ngIf="carouselIndex !== 0"
      [ngClass]="{ hidden: carouselIndex === 0 }"
      class="carousel-button prev-button p-button-text p-button-secondary"
      (click)="onBack()"
    ></button>
    <button
      pButton
      [disabled]="btnDisabled || infoForm.invalid"
      type="button"
      label="{{ carouselIndex === 3 ? 'Confirm' : 'Next Step' }}"
      [ngClass]="
        carouselIndex === 3 ? 'p-button-primary' : 'p-button-secondary'
      "
      class="carousel-button next-button"
      (click)="onNext()"
    ></button>
  </section>
</div>
